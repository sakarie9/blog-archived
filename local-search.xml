<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>使用dae和clash实现的全局代理方案</title>
    <link href="/2023/dae-clash/"/>
    <url>/2023/dae-clash/</url>
    
    <content type="html"><![CDATA[<p>使用 dae 和 clash 实现全局代理，透明且高性能</p><span id="more"></span><p><a href="https://github.com/xzsk2/network-configs">Github 仓库</a></p><h2 id="使用项目"><a href="#使用项目" class="headerlink" title="使用项目"></a>使用项目</h2><ul><li><a href="https://github.com/daeuniverse/dae">dae</a>：高性能全局透明代理</li><li><a href="https://github.com/MetaCubeX/Clash.Meta/tree/Meta">Clash.Meta</a>：作为 dae 的上游提供代理</li><li><a href="https://github.com/caddyserver/caddy">caddy</a>：可选，为某些受到 SNI 阻断的服务提供直连</li></ul><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><ul><li><p><a href="https://github.com/daeuniverse/dae/blob/main/docs/getting-started/README_zh.md">dae</a>，注意 dae 对内核版本有要求</p></li><li><p>一个正常工作的代理客户端，<code>clash</code>、<code>clash-meta</code>、<code>clash for windows</code>、<code>v2ray</code> 等均可</p></li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="clash"><a href="#clash" class="headerlink" title="clash"></a>clash</h3><p>本节可跳过，可使用现有的正常工作的配置文件，仅需要保证 clash 的端口和 dae node 中配置的一致。与 dae 共同使用时请保证代理的各种全局代理方案（tun、iptables 等）均已关闭</p><h4 id="转换订阅"><a href="#转换订阅" class="headerlink" title="转换订阅"></a>转换订阅</h4><p>自行搭建 <a href="https://github.com/qier222/proxy-provider-converter">proxy-provider-converter</a>，或使用 <a href="https://proxy-converter.sakari.top/">proxy-converter.sakari.top</a>，将 clash 订阅转换成 <code>Proxy Provider</code> 支持的格式，或直接使用 v2ray 订阅连接</p><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><p>编辑 <a href="clash/config.yaml">clash&#x2F;config.yaml</a>，将转换后的链接填入 <code>url</code> 中</p><p>下载 <a href="https://github.com/yaling888/yacd/archive/gh-pages.zip">Yacd-meta</a>，解压至配置文件中 <code>external-ui</code> 所在目录</p><p>根据需要修改分流规则</p><h3 id="dae"><a href="#dae" class="headerlink" title="dae"></a>dae</h3><p>修改 <a href="dae/config.dae">dae&#x2F;config.dae</a>，将 <code>wan_interface</code> 的值修改为自己的网卡，可以使用 <code>ip a</code> 查看</p><p>根据使用的代理在 <code>routing</code> 下添加规则，如 <code>pname(clash) -&gt; must_direct</code></p><h3 id="caddy"><a href="#caddy" class="headerlink" title="caddy"></a>caddy</h3><p>无直连需求可跳过，参考 <a href="https://sakari.top/2022/steam-caddy/">在Linux上使用Caddy反代Steam社区</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Clash</tag>
      
      <tag>Linux</tag>
      
      <tag>Proxy</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>作为 github-actions[bot] 进行 commit</title>
    <link href="/2023/github-actions-bot/"/>
    <url>/2023/github-actions-bot/</url>
    
    <content type="html"><![CDATA[<p>作为 github-actions[bot] 进行 commit，避免污染 commit 记录</p><span id="more"></span><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">git config user.email &quot;41898282+github-actions[bot]@users.noreply.github.com&quot;<br>git config user.name &quot;github-actions[bot]&quot;<br>git commit<br></code></pre></td></tr></table></figure><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAgICAgJCAkKCgkNDgwODRMREBARExwUFhQWFBwrGx8bGx8bKyYuJSMlLiZENS8vNUROQj5CTl9VVV93cXecnNEBCAgICAkICQoKCQ0ODA4NExEQEBETHBQWFBYUHCsbHxsbHxsrJi4lIyUuJkQ1Ly81RE5CPkJOX1VVX3dxd5yc0f/CABEIADMBGwMBIgACEQEDEQH/xAAxAAADAAMBAQAAAAAAAAAAAAAABQYCAwQBBwEBAQEBAQAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAPlW0tfXzii/1LCn0Us+dFwjhGfTVJEDzsxuXKbtiMKjuqJL3iljyucHzkfOkhx48qHLLGWPLZbU2UGDKIdbyeNpZqR0M9K8ppnsSm4n3zOrHWg2bjtTq1xTZzepe3vRma1F2secyzYbtnCD0RA1zTg43oMhluSgz2K8Bro4Q7zgAM8LCeoZ7J5bRPXjXNRrE0X7GZWennZYR+Ut/NpOYv8AmkfSvI3wut8HvsrNsH7K95eXjh94jwH+CMKTxB4OdSvYO/ERTvFL5FLoR7ThnqGexoAyAAAAAAAAAAAAAAAAAAAAAAAAAAA5Qzf/xAAmEAACAgICAgEEAwEAAAAAAAADBAECAAUTFAYSFRARMzQHFiAk/9oACAEBAAEIAAhDIRTPADOAGcAM4AZwAzgBnADOAGcAM4AZwAzgBnADOAGcAM4AZwAzgBnADOAGcAM4AZwAzgBnADOAGcAM4AZwAzgBnADOAGcAM4AY3SkMEiAfgDjyq1S+LxV3UaqT71o9/G0AMukNsUQPH0IRA8d1gtzqaWS0esel9qmzRChs+AO+1mue2O4tU/jyIauN5qNdTZlurVRPTmcZFYevSJrrMi2qFIQUfOMtS6pq7OrWDQ2uWkAVTPagTFtaCrmr1cVvL9HhLrBVn4gNnw0HrdXaLUEI20rTbCEONb6GOGu2V19lqBGO6aaCwFlrMG2WtoySKBvqAxd37j14Kw4I868Jha/qgTB3AAvRTWl7nH9Xv2iYD8AcU8ldWAAMob6gNbtpPHkux7jLV/7Q/wAwyTbyN+ToGrTyFmhWbQy1J2ZPjflWwaGzS202a1dOnqVFnjqiPQM7y16MVKDaSvS3D8wzNbUszu4ZFSl/lWe8VzEmyJMiYHTYs0WovFt6W3NeB74o4VtANsQYeE1dyfkeIQm3gqwglnyA/vU1FNpKsUmFtvakRBybMvZCUXzF/WRybbXOEgzB2BwwrFPkLVNUoqv/AGShS31e/aJgPwBzxvRbzyZm8K7b+LN+mtyKJmPeTDPkiLUdCzATSKxozhLxc3+CCKP05PoIJjEqMX+60vaLTX6el5pN4/zel6TEX+j37RMB+AOGAY38Sa0et8KBtj+UaiyfmdVqebeQQvpNUiZJMpkUUhtamshupTW7HnZ0ClOxQFEVKLPqwXSqfKSqtOg1hT6y0J0Vsjur5XVp3hcly6nUry8Yg9Pp7PkFGtkwmfG1Zpo9ceUjWT1yAmwGhsxCePVrbrK++vVldNJggrXALXnhD7gXQ9FqXldWwbHq1Zapd39ja/WVmi8twONa3UdFFbJw5LauoWLxW4wCE6SGE9aINaSYKND7OaHWHduhCzr06yYn0e/aJgPwBzQbjaaK9w18X8k3fjC+1qktRn3YOzqdyPW1wjzZL+8kecL78kbB+ti2iuxfpa1q1KShIJW77xL0uT5HYctzZDjdbiJEttWk0zTZbEczNLbU8qKArZxu9xktLrsnhiT7MhkKKW7LPDwZdxwlqXvUxq8frzGj1+3Mb19c7rkWi0S21YMAkrbZqxUpGqyoNYfdd9B0zuuybmntt8MByjLAyyakOuVm8xLn/LcNce/aJlXGK0rEd5rO81neazvNZ3ms7zWd5rO81neazvNZ3ms7zWd5rO81neazvNZ3ms7zWd5rO81neazvNZ3ms7zWd5rO81neazvNZ3ms7zWd5rO81neazvNYYt7km1v/xAAzEAACAQQABAQEBQQDAQAAAAABAgMABBESEyExkgUiQaFRUmGxECMycXIUIDNCMIGRU//aAAgBAQAJPwCJCSi+g+FQp2ioU7RUKdoqFO0VCnaKhTtFQp2ioU7RUKdoqFO0VCnaKhTtFQp2ioU7RUKdoqFO0VCnaKhTtFQp2ioU7RUKdoqFO0VCnaKhTtFQp2ioU7RUKdoqFO0VCnaKhTtFQp2ioU7RUKdoqFO0UoA5favkX7VBGBLBCZMKPOS3rXFiitbtEEcAUeVvQCric2UNqlwNQOKRL0FJcSwDw/Pk1VwoJ67eUVxXguo3YRsyPhk9GZORFG4W1hdUVDJGjlj1yz4UCpxLH5GVgQevodcjNSzi8ggWdhgcMqqjlUsxsVskmhbI2Z5eQUnFMVuWGYfkOObBv+qS6a3iyzTiVU1RepKlD1PQVHcTviQsEkTMIBwu6EEkEcyRW+hs4IoVT1fXq3wFWltHEECW7JGFdpQR0bq2B1qCB53t57h+KqkZaMmMNvywMZqKyN00solWARmPTXy78PKZoIyXDxu90ADxNvSM+iiovDoEjSRliaL83SMZJV9Sc0PDyktoheBoRx5WOej69T/KogrsZw5xzOH9at4ML4VBIuYkbDlUGRkHBOaRV3sY2bAxkknmasLVreRLZCFhRX/NRckOoDZyaWze8S4lV1uEVjKoOFEZfIFQB5eFJMwKhiqq/D1VWBXJPUkHAq3EU3Gt0BwE248e5DBAq5X4gVNw40CNDI7BlZS2ucxhs0JhNBxN5Aw4SFR5R0OxY0zl52kRzJgAFMHPLoKYXImwEaCTTBJx5t0Jr+o1j4rLKxXRVH6A3LmW/s+n2r5F+1QWs3A/wvNHu8f8TRjmurieN+HKhdZMHLZpIHE0QieFkzFoOgxUNthLY2/D0wjRk9CKjgQ2ewiCJhcN6EVaWfBnxxLfh/lEj1xnOahiizjCRrqgx9KhtY2nUJJIkeHKfLmrtrhI3LySFCg+igGsK0oUGQZ3ABzhT6Zrw+0kE8iySZ4q7Mv8HWrO3STDqJcPuofIIGWIpI2ja2SAoQcER/pbr+oV4XZDSLhoyiUagfAb4pY+I6OmuDqqsumBz9B0oKXQ8g3TmMVjEcwlif8A3jb11P1qxtFnljdHmVGDEOMHkG1zVjama3jVIpiHLrr0OC2uatoLlA7OomVjqzdcFCvWoIZXuo+G5YMNVHooQjHSvD7V2jhESSnibgDp0cDNWdqlwsaoJwrFxquoPmYgGrK1eVGLLM6sXB7gDSysyu7JLDLwZV35sAwB5GmlCRHMaSyGXGevw61aW5h0VBF59QA2/XbbqatoHLyyS7+cENJ6+VgP2yKCfkO7Lkdd8Ahqt4YtYmjUIDgbAjPMkk8+pNWsLqGdgxLhgzDr5WA/s+n2r5F+1SRW9sjhXnlwEUt0T6sa8Zt7qX/4lBEXPypSlZIm1YEYIPwI/CNhGxIVyORI64NROYwwUvr5QT6E/hG/C21318u3wz8f7I2XdQy7DGyn1H4xu7t0VRsTj6D/AIFYhRk4HQfiraA4LY5ZP9ylSQCMjHI9D+P0+1fIv2qLdjfvJdqgy/kZqjkkaK8jdzglUUHzFqwF4kJb+ZQFqsXuWnvhCxV2XhKP41Dsp8Suo9WdioCHy8q8NxEfEYV4G7rjK9c9at3dk8WSHqxIiZc4rw954F8ZEYiV2GoK4zkVdJNL/VmMWxDKdQT1fGKgCiUXG8UTyEOYRkBTIAedeBaMsUOsLNITgt1HrUEk3D8HScQbt53LYqzYqlhBcCAyMDG8h5rmrQ5mggeBHaThK0gyVLpRKoJrvaMNkbKzCrGWBmW5LWxdtpTD0xnmM14dq0/hs8v9M7M2jLkcvXDClKKniTqkRJPDBTOvmqEfnrEzTlmyNzg4564qz4QW6MJQM3nGpP8AseoqxRTcySRth38uuAGXJ686tAzPZyTM+7A7R7EYwcYOtQBdrIS6Bm1DCbT4k1YQeQKB+v1cDPJqljWQ8DVhxN24mM7ZGmOfLFWnBCXqJ1Y5wrddvWk/LEJQjJ/z51Hsc0VPCmQER8Uu6f7bbAL21aWzxtaK8ZUy4I4oXPmbIp4+KYYnUji7sXwTnI0xVmpW1JVULv5svrs2COlQRCLhW0YWVpORaMHC8PnmkzHayTpMCx82P8f/ALnH4fT7V8i/aoTPaGTiBFmMLq4GN43QgqatUaa8EeJXcERFM8wtOXmmcs5JyST1JNW8ruJA4xOyIcdN0AO1TuMStKoDEBXY5JX4VdTPswZtnJyw6E/WrycNL/kIkbL/AMqvJwxYsSJGBLH1/enYODsGBwQeuQRV3OzKxZSzsSCfUVe3HFZdWfiNsR8CauZQ8ahUYOcqo9FPoKuJSZeUhLnz4+b41fXCkqFOJGGVHQdelIEe3LlJlZhJh8kjrirmUvGMIxckrj5SelXUxnHSTc7/APvWo15TNM8uWLu5GMtk1PJwc54ex1z+1XMrMnJCXJK/tUjjQkphv0k/CpX5KVHM8lPUfsc1K+uuuNjjXO2P2zzq6m2CaA7nIX5f2q4lMQ6RlzqP+quJXUYwGct0pCqh93JbbZ8Y9AMCrqbWM5QbnCkfL8KupuLjXfc7Y+GauZeEDnTc6/8AlTyLKc5cMQxz9RV1MC4wxDnzAfGlfeVw80jPtvjJHLH4fT7VJyCj0FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FSewqT2FHJIHp9K/8QAJBEAAgEEAQQCAwAAAAAAAAAAAAERAhIhUTFhgZGhA0EQQHH/2gAIAQIBAT8AppmOrS8ipLM92vAqc0rY6Y5MJx37Fy19wSknjgVSb4LlolRhb9E9My14LlouWskolaIQ0i+xIXyJsl74JcroNtpp9BotRas9Z9kItWi1aLVkhEISRC/DK04UFCaqTaLlKhErGNeoJU0uOInsNrQ6lPG/ZcuYxPBK+kSpb/noTJU8ErUk8vnglEqfI2sx19j/AEqj/8QAJBEAAwABAQgDAQAAAAAAAAAAAAEREoECITFRYXGRoRBAscH/2gAIAQMBAT8Abl6JvwUbU0pePQTsEqrpqLZdnRvwY2R8TFi2evP0YvKdidd0T8mP7B7LIxJ/MpiRH9JGmVmTMn4KzJmT5mXArKxtlfyhtQjjo0/32RxruQj3aehpwjI5O/saJw0IzkR7tCP8I92nr6n/2Q==" alt="Preview"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux光标主题配置</title>
    <link href="/2022/linux-cursor/"/>
    <url>/2022/linux-cursor/</url>
    
    <content type="html"><![CDATA[<p>WM 下配置系统全局光标主题</p><span id="more"></span><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>以 <a href="https://github.com/catppuccin/cursors/"><code>Catppuccin-Frappe-Light-Cursors</code></a> 为例</p><p>从仓库下载 <code>Catppuccin-Frappe-Light-Cursors.zip</code>，解压至 <code>~/.local/share/icons</code></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs axapta">icons<br>├── Catppuccin-Frappe-Light-Cursors<br>│   ├── cursors<br>│   └── <span class="hljs-keyword">index</span>.theme<br></code></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Qt"><a href="#Qt" class="headerlink" title="Qt"></a>Qt</h3><p><code>~/.icons/default/index.theme</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[icon theme]</span><br><span class="hljs-attr">Inherits</span>=Catppuccin-Frappe-Light-Cursors<br></code></pre></td></tr></table></figure><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p><code>~/.zlogin</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">XCURSOR_THEME</span>=Catppuccin-Frappe-Light-Cursors<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">XCURSOR_SIZE</span>=32<br></code></pre></td></tr></table></figure><h3 id="GTK"><a href="#GTK" class="headerlink" title="GTK"></a>GTK</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">gsettings set org<span class="hljs-selector-class">.gnome</span><span class="hljs-selector-class">.desktop</span><span class="hljs-selector-class">.interface</span> <span class="hljs-attribute">cursor</span>-theme Catppuccin-Frappe-Light-Cursors<br>gsettings set org<span class="hljs-selector-class">.gnome</span><span class="hljs-selector-class">.desktop</span><span class="hljs-selector-class">.interface</span> <span class="hljs-attribute">cursor</span>-size <span class="hljs-number">32</span><br></code></pre></td></tr></table></figure><h3 id="Hyprland"><a href="#Hyprland" class="headerlink" title="Hyprland"></a>Hyprland</h3><p><code>~/.config/hypr/hyprland.conf</code></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">exec-once</span> <span class="hljs-operator">=</span> hyprctl setcursor Catppuccin-Frappe-Light-Cursors <span class="hljs-number">32</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Unixporn</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>在Linux上使用Caddy反代Steam社区</title>
    <link href="/2022/steam-caddy/"/>
    <url>/2022/steam-caddy/</url>
    
    <content type="html"><![CDATA[<p>在 Linux 上 使用 Caddy 原生实现 <a href="https://www.dogfight360.com/blog/686/">Steamcommunity 302</a> 的功能并实现开机自启</p><span id="more"></span><h3 id="生成配置文件"><a href="#生成配置文件" class="headerlink" title="生成配置文件"></a>生成配置文件</h3><p>为了生成自定义配置，需要在 Wine 下运行 Steamcommunity 302，在设置里勾选需要的服务，将证书期限修改为1年，点击 <code>导出SteamDeck版本一键安装脚本</code></p><p>在 <code>SteamDeck_302</code> 文件夹下将如下几个文件到任意目录，这里假定为 <code>/data/caddy</code>，根据需要自行替换目录</p><blockquote><p>steamcommunity.crt</p><p>steamcommunity.key</p><p>steamcommunity_302.caddy.json</p><p>steamcommunityCA.pem</p></blockquote><p>复制 Steamcommunity 302 设置里的 hosts 到 Linux 的 <code>/etc/hosts</code>，根据反代服务选择不同，hosts 条目也不同，请复制自己设置内的 hosts</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1</span> steamcommunity.com<br><span class="hljs-number">127.0.0.1</span> www.steamcommunity.com<br><span class="hljs-number">127.0.0.1</span> store.steampowered.com<br><span class="hljs-number">127.0.0.1</span> api.steampowered.com<br><span class="hljs-number">127.0.0.1</span> help.steampowered.com<br><span class="hljs-number">127.0.0.1</span> login.steampowered.com<br><span class="hljs-number">127.0.0.1</span> store.akamai.steamstatic.com<br></code></pre></td></tr></table></figure><h3 id="下载-Caddy"><a href="#下载-Caddy" class="headerlink" title="下载 Caddy"></a>下载 Caddy</h3><p>在 <a href="https://github.com/caddyserver/caddy/releases/tag/v2.6.4">caddy&#x2F;release</a> 下载对应平台的 caddy（如 amd64 下载  <code>caddy_2.6.4_linux_amd64.tar.gz</code> ）</p><p>解压出来 <code>caddy</code> 二进制文件放入 <code>/data/caddy</code></p><p>此时你的 <code>/data/caddy</code> 文件夹结构应如下</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">caddy<br>├── caddy<br>├── steamcommunity_302<span class="hljs-selector-class">.caddy</span><span class="hljs-selector-class">.json</span><br>├── steamcommunityCA<span class="hljs-selector-class">.pem</span><br>├── steamcommunity<span class="hljs-selector-class">.crt</span><br>└── steamcommunity.key<br></code></pre></td></tr></table></figure><h3 id="编辑配置"><a href="#编辑配置" class="headerlink" title="编辑配置"></a>编辑配置</h3><details>  <summary>使用SteamDeck版本一键安装脚本则无需修改</summary><p>打开 <code>steamcommunity_302.caddy.json</code></p><p>找到随机生成的端口号，此处端口为 19736</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>steamcommunity.com:<span class="hljs-number">19736</span> https:<span class="hljs-regexp">//</span>www.steamcommunity.com:<span class="hljs-number">19736</span> &#123;<br>    tls steamcommunity.crt steamcommunity.key<br>    @steamcommunityrp &#123;<br>    path <span class="hljs-regexp">/comment/</span>*<br>    path <span class="hljs-regexp">/forum/</span>*<br>···<br><br>https:<span class="hljs-regexp">//</span>store.steampowered.com:<span class="hljs-number">19736</span> https:<span class="hljs-regexp">//</span>api.steampowered.com:<span class="hljs-number">19736</span> https:<span class="hljs-regexp">//</span>help.steampowered.com:<span class="hljs-number">19736</span> https:<span class="hljs-regexp">//</span>login.steampowered.com:<span class="hljs-number">19736</span> https:<span class="hljs-regexp">//</span>store.akamai.steamstatic.com:<span class="hljs-number">19736</span> &#123;<br><span class="hljs-comment">#tls self_signed</span><br>tls steamcommunity.crt steamcommunity.key<br>···<br></code></pre></td></tr></table></figure><p>将所有的 <code>:19736</code> 删除，处理后的部分如下</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>steamcommunity.com https:<span class="hljs-regexp">//</span>www.steamcommunity.com &#123;<br>    tls steamcommunity.crt steamcommunity.key<br>    @steamcommunityrp &#123;<br>    path <span class="hljs-regexp">/comment/</span>*<br>    path <span class="hljs-regexp">/forum/</span>*<br>···<br><br>https:<span class="hljs-regexp">//</span>store.steampowered.com https:<span class="hljs-regexp">//</span>api.steampowered.com https:<span class="hljs-regexp">//</span>help.steampowered.com https:<span class="hljs-regexp">//</span>login.steampowered.com https:<span class="hljs-regexp">//</span>store.akamai.steamstatic.com &#123;<br><span class="hljs-comment">#tls self_signed</span><br>tls steamcommunity.crt steamcommunity.key<br>···<br></code></pre></td></tr></table></figure></details><h3 id="导入根证书"><a href="#导入根证书" class="headerlink" title="导入根证书"></a>导入根证书</h3><p>Archlinux：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># cp steamcommunityCA.pem <span class="hljs-regexp">/etc/</span>ca-certificates<span class="hljs-regexp">/trust-source/</span>anchors/steamcommunityCA.crt<br><br># trust extract-compat<br></code></pre></td></tr></table></figure><p>Centos:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># cp steamcommunityCA.pem <span class="hljs-regexp">/etc/</span>pki<span class="hljs-regexp">/ca-trust/</span><span class="hljs-keyword">source</span>/anchors<br><br># <span class="hljs-regexp">/bin/u</span>pdate-ca-trust<br></code></pre></td></tr></table></figure><p>Ubuntu:</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gradle"># cp steamcommunityCA.pem <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/share/</span>ca-certificates<br><br># update-ca-certificates<br></code></pre></td></tr></table></figure><blockquote><p>Centos 和 Ubuntu 的导入方式来自 <a href="https://www.dogfight360.com/blog/2319/">Dogfight360</a> ，不保证一定可用</p></blockquote><h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><p>赋予caddy可执行权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x caddy<br></code></pre></td></tr></table></figure><p>赋予caddy监听所需端口权限</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo setcap <span class="hljs-attribute">CAP_NET_BIND_SERVICE</span>=+eip caddy<br></code></pre></td></tr></table></figure><p>启动</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">./caddy run <span class="hljs-attr">--config</span> steamcommunity_302<span class="hljs-selector-class">.caddy</span><span class="hljs-selector-class">.json</span> <span class="hljs-attr">--adapter</span> caddyfile<br></code></pre></td></tr></table></figure><p>如启动无报错 Ctrl+C 强行停止，配置 Systemd 服务</p><p>新建编辑 <code>.config/systemd/user/caddy.service</code>，修改两处 <code>/data/caddy</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-section">[Unit]</span><br><span class="hljs-attr">Description</span>=Caddy Steam Reverse Proxy<br><br><span class="hljs-section">[Service]</span><br><span class="hljs-attr">WorkingDirectory</span>=/data/caddy<br><span class="hljs-attr">ExecStart</span>=/data/caddy/caddy run --config steamcommunity_302.caddy.json --adapter caddyfile<br><br><span class="hljs-section">[Install]</span><br><span class="hljs-attr">WantedBy</span>=default.target<br></code></pre></td></tr></table></figure><p>运行并启动服务</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ systemctl --<span class="hljs-keyword">user</span> <span class="hljs-title">daemon-reload</span><br>$ systemctl --<span class="hljs-keyword">user</span> <span class="hljs-title">enable</span> --now caddy.service<br></code></pre></td></tr></table></figure><p>查看服务状态</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">$ systemctl --<span class="hljs-keyword">user</span> <span class="hljs-title">status</span> caddy.service<br></code></pre></td></tr></table></figure><h3 id="疑难解答"><a href="#疑难解答" class="headerlink" title="疑难解答"></a>疑难解答</h3><ul><li>steamcommunity_302.caddy.json 不存在？<br>steamcommunity 302 未成功运行，尝试在 windows 环境下重新运行</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Steam</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Heroku+Cloudflare 免费账号实现24/7在线及域名绑定</title>
    <link href="/2022/heroku-cf/"/>
    <url>/2022/heroku-cf/</url>
    
    <content type="html"><![CDATA[<blockquote><p><strong>2022&#x2F;12&#x2F;28, Heroku 将结束免费方案，此教程同步作废</strong></p></blockquote><span id="more"></span><p>Heroku 的免费方案下，单个用户所有 app 每月的总运行时长不超过550小时，且不能绑定自己的域名，如果需要全天在线需要绑定银行卡，对于白嫖用户相当不友好。但是我们可以给 Heroku 套上一层 Cloudflare 来实现全月在线和域名绑定</p><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><p>使用 Cloudflare Workers 对 Heroku 进行反代并手动实现简单的负载均衡</p><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ul><li>一个使用 Cloudflare 进行域名解析的域名</li><li>两个 Heroku 账户（无需验证信用卡）</li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Heroku-配置"><a href="#Heroku-配置" class="headerlink" title="Heroku 配置"></a>Heroku 配置</h3><p>在两个账号下分别配置两个项目，切勿配置在同一账户下，免费时间是以账户为单位而非实例。配置过程略，根据自己需要选择，最后需要两个这样的 URL <code>https://******.herokuapp.com/</code></p><h3 id="Cloudflare-配置"><a href="#Cloudflare-配置" class="headerlink" title="Cloudflare 配置"></a>Cloudflare 配置</h3><ol><li><p>添加 DNS 记录，类型 <code>AAAA</code>，名称自定，IPv6 地址为 <code>100::</code>，代理状态打勾，保存</p></li><li><p>Workers - 管理 Workers - 创建服务，服务名称自定，这里假设为 <code>heroku-dns</code>，创建服务</p></li><li><p>点击快速编辑，填入以下代码，手动替换 url1 和 url2，保存并部署</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">addEventListener</span>(<br>    <span class="hljs-string">&quot;fetch&quot;</span>,<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> &#123;<br>        <span class="hljs-keyword">let</span> url=<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);     <br>        <span class="hljs-keyword">let</span> localDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>        <span class="hljs-keyword">let</span> day = localDate.<span class="hljs-title function_">getDate</span>();<br><br>        <span class="hljs-keyword">if</span> (day&lt;<span class="hljs-number">15</span>) <span class="hljs-comment">//每月前十五天使用url1,后十五天使用url2</span><br>        &#123;<br>            url.<span class="hljs-property">hostname</span>=<span class="hljs-string">&quot;******.herokuapp.com&quot;</span>; <span class="hljs-comment">//url1</span><br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            url.<span class="hljs-property">hostname</span>=<span class="hljs-string">&quot;******.herokuapp.com&quot;</span>; <span class="hljs-comment">//url2</span><br>        &#125;<br>        <span class="hljs-comment">//console.log(`Request url: $&#123;url.hostname&#125;`);</span><br>        <span class="hljs-keyword">let</span> request=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>(url,event.<span class="hljs-property">request</span>);    <br>        event. <span class="hljs-title function_">respondWith</span>(       <br>            <span class="hljs-title function_">fetch</span>(request)    <br>        )  <br>    &#125;<br>)<br></code></pre></td></tr></table></figure></li><li><p>Workers - HTTP 路由 - 添加路由，<code>路由</code> 处填写 <code>名称.域名.顶级域名/*</code>，名称处填写第一步中 DNS 记录里填写的名称，域名填写当前在 Cloudflare 添加解析的域名，别忘了后面的 <code>/*</code>；服务选择第二步新建的 <code>heroku-dns</code>，环境 <code>production</code>，保存</p></li><li><p>此时访问域名就能访问到部署在 Heroku 上的服务，可以在 Workers 的编辑界面测试，取消掉 <code>console.log</code> 行的注释，发送请求就能在控制台看到当前使用的是哪个 URL</p></li></ol><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>单个账户的 550 小时用半个月是完全没有问题的，可以使用 <code>uptime</code> 等监控程序每15分钟一次使 Heroku 永不休眠，避免唤醒时的巨大访问延迟</p>]]></content>
    
    
    <categories>
      
      <category>PaaS</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Heroku</tag>
      
      <tag>Cloudflare</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Minecraft 在 Linux 下内存占用极多的问题</title>
    <link href="/2022/minecraft-memory/"/>
    <url>/2022/minecraft-memory/</url>
    
    <content type="html"><![CDATA[<p>众所周知，Java版的Minecraft是会吃掉很多内存的，但最大内存也会受到 <code>-Xmx</code> 等JVM参数的限制。如果它占用的内存能达到两倍的最大内存限制，甚至能吃掉所有的物理内存+虚拟内存，显然是不合理的。</p><span id="more"></span><h2 id="相关-Issue"><a href="#相关-Issue" class="headerlink" title="相关 Issue"></a>相关 Issue</h2><p><a href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/6140">radeonsi: VRAM Leak&#x2F;abnormally high usage in Minecraft mod pack </a></p><p>问题已在新版 mesa 中有所缓解</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">OS</span>: Arch Linux x86_64<br><span class="hljs-attribute">Kernel</span>: <span class="hljs-number">5</span>.<span class="hljs-number">18</span>.<span class="hljs-number">12</span>-zen1-<span class="hljs-number">1</span>-zen<br><span class="hljs-attribute">CPU</span>: AMD Ryzen <span class="hljs-number">5</span> <span class="hljs-number">5600</span>G with Radeon Graphics (<span class="hljs-number">12</span>)<br><span class="hljs-attribute">GPU</span>: AMD ATI Cezanne<br><span class="hljs-attribute">GPU</span>: AMD ATI Radeon RX <span class="hljs-number">580</span><br><span class="hljs-attribute">Memory</span>: <span class="hljs-number">16</span>GB<br><span class="hljs-attribute">mesa</span> <span class="hljs-number">22</span>.<span class="hljs-number">1</span>.<span class="hljs-number">3</span>-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Minecraft</span> <span class="hljs-number">1</span>.<span class="hljs-number">7</span>.<span class="hljs-number">10</span><br><span class="hljs-attribute">GTNewHorizons</span>-<span class="hljs-number">1</span>.<span class="hljs-number">7</span>.<span class="hljs-number">10</span>-<span class="hljs-number">2.1.2.3</span>qf<br><span class="hljs-attribute">polymc</span> <span class="hljs-number">1</span>.<span class="hljs-number">3</span>.<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><h2 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h2><h3 id="初遇问题"><a href="#初遇问题" class="headerlink" title="初遇问题"></a>初遇问题</h3><p>给 Minecraft 分配最大 8GB 内存，加上其他程序和系统的占用，游戏打开进入服务器后内存占用会在 10GB 左右浮动，游戏过程中内存占用会不断增加，甚至用尽物理内存。此时的 java 内存占用在 10GB 左右，但 <code>free -h</code> 显示如下（具体数值是我编的可能对不上但大概是这个意思）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell">            total        used        free      shared  buff/cache   available<br>内存：       <span class="hljs-number">15</span><span class="hljs-built_in">Gi</span>       <span class="hljs-number">14.9</span><span class="hljs-built_in">Gi</span>       <span class="hljs-number">0.5</span><span class="hljs-built_in">Gi</span>       <span class="hljs-number">228</span><span class="hljs-built_in">Mi</span>       <span class="hljs-number">0.5</span><span class="hljs-built_in">Gi</span>       <span class="hljs-number">1.1</span><span class="hljs-built_in">Gi</span><br>交换：       <span class="hljs-number">17</span><span class="hljs-built_in">Gi</span>         <span class="hljs-number">8</span><span class="hljs-built_in">Gi</span>         <span class="hljs-number">9</span><span class="hljs-built_in">Gi</span><br></code></pre></td></tr></table></figure><p>可以看出不仅物理内存用尽，虚拟内存也使用了很大一部分，但很明显已使用的内存和各进程的内存占用总和对不上。此时 Minecraft 已经开始由于内存不足进行高强度 GC 而产生间歇性卡顿，此时如果不关闭MC，待虚拟内存消耗殆尽时会因为 OOM 强行终止掉 java 进程，或者崩掉其他进程。最严重的一次似乎是崩掉了 systemd， poweroff 和 journalctl 都没有响应，其次是崩掉了 sway 窗口管理器</p><p>但问题就来了， java 进程终止后，内存占用依旧异常，很明显我的所有进程的内存使用量总和是不可能有下图所示10.8GiB这么多的，那么多出来的内存都去哪了呢</p><p><img src="/img/posts/minecraft-memory-3.webp"></p><h3 id="分析内存"><a href="#分析内存" class="headerlink" title="分析内存"></a>分析内存</h3><p>根据 <a href="http://linuxperf.com/?p=142">&#x2F;proc&#x2F;meminfo之谜</a> 给出的公式分析内存</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">MemTotal</span> = MemFree +【Slab+ VmallocUsed + PageTables + KernelStack + HardwareCorrupted + Bounce + X】+【Active + Inactive + Unevictable + (HugePages_Total * Hugepagesize)】<br></code></pre></td></tr></table></figure><p>发现多占用的内存数量与公式里的 X 接近，注解里表示 <code>X表示直接通过alloc_pages/__get_free_page分配的内存，没有在/proc/meminfo中统计，不知道有多少，就像个黑洞。</code> 猜测或许是 java 引发了内存泄漏</p><h3 id="更换-jdk"><a href="#更换-jdk" class="headerlink" title="更换 jdk"></a>更换 jdk</h3><p>此前使用的一直是 AUR 中的 jdk8-graalvm-bin，尝试更换如下几个版本的 jdk，并设置对应的 JVM 参数，但并没有明显改善</p><ul><li>Oracle jdk8</li><li>jdk8-dragonwell</li><li>jdk8-adoptopenjdk</li><li>jdk8-openjdk-shenandoah</li><li>jdk8-openj9</li></ul><p>题外话，这些 jdk 之中，内存占用和性能表现最优秀的大概是 jdk8-dragonwell，有兴趣的可以试试<br><a href="https://github.com/alibaba/dragonwell8">Alibaba Dragonwell8 JDK</a></p><h3 id="增删-mod"><a href="#增删-mod" class="headerlink" title="增删 mod"></a>增删 mod</h3><p>由于 GTNH 这个整合包的 mod 数量有250+个，没办法一个个测试内存问题，只单独把几个优化相关的 mod 加加减减测试数次但问题依旧，直到添加了一个性能分析 mod，它告诉我现在在用核显跑 Minecraft，使用 <code>nvtop</code> 观察，分配的 512MB 核显显存此时将近满载，java 进程消耗了大约 200MB 的显存（至少他是这么写的）</p><h3 id="核显独显"><a href="#核显独显" class="headerlink" title="核显独显"></a>核显独显</h3><p>在双显卡的 Linux 平台上，核显独显的切换可以通过使用 <code>DRI_PRIME</code> 实现，比如 <code>DRI_PRIME=1 vkcube</code> 就会调用我的独显运行</p><p>而在 polymc 上，我设置的 <code>env DRI_PRIME=1</code> 并没有生效， Minecraft 依然在使用默认值也就是核显运行。重新设置 polymc，在 <code>自定义命令-包装器命令</code> 中填入 <code>sh -c &quot;export DRI_PRIME=1;gamemoderun $INST_JAVA \&quot;$@\&quot;&quot;</code> ，启动，通过 <code>radeontop</code> 和 <code>nvtop</code> 监控，成功在独显上运行</p><h3 id="显存"><a href="#显存" class="headerlink" title="显存"></a>显存</h3><p>那问题是不是解决了？并没有，内存依然会溢出，但是比以前撑的时间更长了，使用 <code>radeontop</code> 和 <code>nvtop</code> 查看，发现独显的 4GB 显存已经满了，Minecraft 这个游戏能使用满 4GB 的显存明显是很不合理的，即使是这么多 mod 的大型整合包。重启再开发现，显存占用满之前内存占用都是正常的，而显存满了之后，内存占用就开始不正常了</p><p>所以现在谜底已经很明显了，多出来的那部分 X ，就是被当成显存使用的内存。</p><p>使用核显的时候分配的 512MB 的显存是不够用的，就会把物理内存当成显存来用，这部分就是 <code>radeontop</code> 中的 <code>GTT</code>。独显也一样，独立的显存能缓解内存爆掉的速度，但总还是会爆的</p><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>知道了是显存占用问题而非内存问题后，搜到了这么一个 issue</p><p><a href="https://gitlab.freedesktop.org/mesa/mesa/-/issues/6140">radeonsi: VRAM Leak&#x2F;abnormally high usage in Minecraft mod pack</a></p><p>症状几乎和我遇到的一模一样，评论指出了可能的解决方案，通过降低 mesa 某段代码中的 buffer size 可以缓解显存占用问题，开始准备重新编译 mesa</p><p>以下步骤基于 ArchLinux，其他发行版不能直接使用，但可以参考并手动修改编译</p><ol><li><p>使用 <code>asp</code> 获取 mesa 的 <code>PKGBUILD</code></p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> ~/build<br><span class="hljs-built_in">cd</span> ~/build<br>asp update mesa<br>asp <span class="hljs-built_in">export</span> mesa<br><span class="hljs-built_in">cd</span> mesa<br></code></pre></td></tr></table></figure></li><li><p>修改 <code>PKGBUILD</code></p><p> 在 <code>prepare()</code> 中添加一行 sed 命令</p> <figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c">prepare() &#123;<br>  cd mesa-$pkgver<br>  sed -i &#x27;s/20\*<span class="hljs-number">1024</span>\*<span class="hljs-number">1024/20</span>\*<span class="hljs-number">1024</span>/g&#x27; src/mesa/vbo/vbo_save.h<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>编译</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">makepkg -s<br></code></pre></td></tr></table></figure><p> 若提示 PGP 错误可尝试</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">makepkg -s --skippgpcheck<br></code></pre></td></tr></table></figure></li><li><p>安装</p><p> 编译完成后目录下会有许多包，安装自己需要的包</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo pacman -U mesa-22.1.3-1-x86_64.pkg.tar.zst<br></code></pre></td></tr></table></figure></li></ol><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>重启之后打开 Minecraft 测试，四个小时左右显存占用只有 1GB，虽然可能治了标没治本，但起码不用每一个小时重启电脑释放内存了</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>TL;DR，解决此问题最有效的方法就是重新编译修改过的 mesa，但为什么他们会设置这么大的数值咱也不知道，至少在这个基于 Minecraft 1.7.10 的 GTNH 整合包之外的游戏里显存表现都没有什么问题，可能是旧版JDK + 旧版Minecraft + 大型整合包带来的三重 DEBUFF 吧</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Games</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Lawnchair 应用抽屉中英混排</title>
    <link href="/2022/android-language/"/>
    <url>/2022/android-language/</url>
    
    <content type="html"><![CDATA[<p>使用 ADB 开启 Lawnchair 应用抽屉的中英混排 无需root</p><span id="more"></span><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在类原生系统的初次开机设置时，如果检测到国内SIM卡，系统会自动将语言切换成 <code>中文（中国）</code> ，而这个语言在系统的 <code>添加语言</code> 列表里面是没有的，你只能找到 <code>简体中文（中国）</code></p><p><img src="/img/posts/android-language-1.webp"></p><p>类原生自带的启动器（QuickStep、Lawnchair 等）在 <code>简体中文（中国）</code> 下，应用抽屉会按照中文在前，英文在后（或者反过来）的方式排序，并且缺少相关的设置项；而在 <code>中文（中国）</code> 下，这些启动器可以正常按照中文拼音首字母进行中英混排</p><p><img src="/img/posts/android-language-2.webp" title="简体中文（中国）&nbsp;|&nbsp;&nbsp;中文（中国）"></p><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>手机连接电脑开启USB调试，输入</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">adb <span class="hljs-built_in">shell</span> settings <span class="hljs-built_in">put</span> <span class="hljs-keyword">system</span> system_locales zh-CN,zh-Hans-CN<br></code></pre></td></tr></table></figure><p>重启，完成</p>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>手动绕过 Windows 11 安装硬件限制</title>
    <link href="/2022/win11-bypass/"/>
    <url>/2022/win11-bypass/</url>
    
    <content type="html"><![CDATA[<p>绕过使用原版 Windows 11 镜像安装时的硬件要求（TPM&#x2F;SecureBoot）</p><span id="more"></span><h3 id="使用-Windows-镜像启动"><a href="#使用-Windows-镜像启动" class="headerlink" title="使用 Windows 镜像启动"></a>使用 Windows 镜像启动</h3><p>   U盘写入镜像或虚拟机挂载镜像启动</p><h3 id="打开命令提示符"><a href="#打开命令提示符" class="headerlink" title="打开命令提示符"></a>打开命令提示符</h3><p>   在 Windows 安装程序的语言选择界面，按下 <code>Shift+F10</code> 打开 CMD 窗口</p><p>   <img src="/img/posts/win11-bypass-2.webp"></p><h3 id="编辑注册表"><a href="#编辑注册表" class="headerlink" title="编辑注册表"></a>编辑注册表</h3><ol><li><p>在 CMD 中输入 <code>regedit</code> 打开注册表编辑器</p></li><li><p>进入 <code>HKEY_LOCAL_MACHINE\SYSTEM\Setup</code></p></li><li><p>右键 <code>Setup</code> 选择 <code>新建-项</code>，重命名为 <code>LabConfig</code></p></li><li><p>点击 <code>LabConfig</code>，在右面的窗口右键新建一共三个 <code>DWORD（32位）值</code>，重命名如下，并将他们的数值数据改为 <code>1</code></p></li></ol><pre><code class="hljs">- BypassTPMCheck- BypassRAMCheck- BypassSecureBootCheck</code></pre><p>   <img src="/img/posts/win11-bypass-3.webp"></p><ol start="5"><li>关闭 CMD 和 注册表编辑器</li></ol><h3 id="继续安装系统"><a href="#继续安装系统" class="headerlink" title="继续安装系统"></a>继续安装系统</h3><p>   <img src="/img/posts/win11-bypass-4.webp"></p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Telegram收发QQ信息-EFB和GO-CQHTTP的Docker部署教程</title>
    <link href="/2021/tg-qq-gocq/"/>
    <url>/2021/tg-qq-gocq/</url>
    
    <content type="html"><![CDATA[<p>使用 Bot 在 Telegram 及 QQ 间转发消息，基本可以做到去 QQ 化，仅在 Telegram 上与 QQ 好友&#x2F;群组互动</p><span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>使用 Bot 在 Telegram 及 QQ 间转发消息，基本可以做到去 QQ 化，仅在 Telegram 上与 QQ 好友&#x2F;群组互动</p><p>本项目使用 Docker Compose 简化了 <a href="https://github.com/ehForwarderBot/ehForwarderBot">Telegram Bot</a> 和 <a href="https://github.com/Mrs4s/go-cqhttp">QQ Bot</a> 的安装与配置，仅需要 Docker Compose 与流畅的国际互联网连接即可使用</p><h3 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h3><ul><li><a href="https://www.docker.com/">Docker</a></li><li><a href="https://docs.docker.com/compose/">Docker Compose</a></li><li>能稳定连接到Telegram服务器的网络</li></ul><h3 id="使用项目"><a href="#使用项目" class="headerlink" title="使用项目"></a>使用项目</h3><ul><li><p><a href="https://github.com/xzsk2/TG-EFB-QQ-Docker">TG-EFB-QQ-Docker</a></p><ul><li><p><a href="https://github.com/xzsk2/EFB-Docker">EFB-Docker</a></p><ul><li><a href="https://github.com/ehForwarderBot/ehForwarderBot">EH Forwarder Bot</a></li><li><a href="https://github.com/ehForwarderBot/efb-telegram-master">Telegram Master</a></li><li><a href="https://github.com/milkice233/efb-qq-slave">QQ Slave</a></li><li><a href="https://github.com/milkice233/efb-qq-plugin-mirai">QQ Plugin Mirai</a></li><li><a href="https://github.com/XYenon/efb-qq-plugin-go-cqhttp">QQ Plugin go-cqhttp</a></li><li><a href="https://github.com/xzsk2/efb-filter-middleware">efb-filter-middleware</a></li></ul></li><li><p><a href="https://github.com/xzsk2/Go-CQHTTP-Docker">Go-CQHttp-Docker</a></p><ul><li><a href="https://github.com/Mrs4s/go-cqhttp">go-cqhttp</a></li></ul></li></ul></li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 克隆</span><br>git <span class="hljs-built_in">clone</span> -b go-cqhttp https://github.com/xzsk2/TG-EFB-QQ-Docker.git<br><span class="hljs-comment"># 进入文件夹</span><br><span class="hljs-built_in">cd</span> TG-EFB-QQ-Docker<br></code></pre></td></tr></table></figure><h3 id="配置GOCQ端"><a href="#配置GOCQ端" class="headerlink" title="配置GOCQ端"></a>配置<code>GOCQ</code>端</h3><ol><li><p>编辑 <code>gocq/config.yml</code> 配置文件</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">account:         <span class="hljs-comment"># 账号相关</span><br>  uin: 000000000 <span class="hljs-comment"># QQ 账号</span><br>  password: <span class="hljs-string">&#x27;&#x27;</span>   <span class="hljs-comment"># QQ 密码，为空时使用扫码登录</span><br></code></pre></td></tr></table></figure></li><li><p>（可选）修改登陆协议，运行如下命令，待提示生成 <code>device.json</code> 后 <code>ctrl+c</code> 退出，编辑 <code>gocq/device.json</code>，参考 <a href="https://docs.go-cqhttp.org/guide/config.html#%E8%AE%BE%E5%A4%87%E4%BF%A1%E6%81%AF">设备信息</a></p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it --name=<span class="hljs-string">&quot;gocq&quot;</span> -v <span class="hljs-variable">$PWD</span>/gocq:/data xzsk2/gocqhttp-docker:latest<br></code></pre></td></tr></table></figure></li></ol><h3 id="配置EFB端"><a href="#配置EFB端" class="headerlink" title="配置EFB端"></a>配置<code>EFB</code>端</h3><ol><li><p>获取<code>token</code></p><p> 创建一个Bot，向 <a href="https://t.me/BotFather">@BotFather</a> 发起会话，发送指令 <code>/newbot</code> 开始创建Bot，创建完成后可获取<code>token</code></p></li><li><p>查看自己的<code>Telegram ID</code></p><p> 向 <a href="https://t.me/get_id_bot">@get_id_bot</a> 发送<code>/start</code>，得到的<code>Chat ID</code>即为用户的<code>Telegram ID</code></p></li><li><p>打开<code>./efb/profiles/default/blueset.telegram/config.yaml</code>，修改下列字段，<code>token</code>修改为上面获取到的<code>Bot token</code>，<code>admins</code>修改为<code>Telegram ID</code>，注意格式</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">token:</span> <span class="hljs-number">123456789</span><span class="hljs-string">:ABCDEFG1ABCDEFG1ABCDEFG1</span><br><span class="hljs-attr">admins:</span><br><span class="hljs-bullet">-</span> <span class="hljs-number">987654321</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose up -d<br></code></pre></td></tr></table></figure><p>如需扫码登陆输入 <code>docker logs gocq</code> 查看二维码</p><h3 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose down<br></code></pre></td></tr></table></figure><h3 id="自动更新"><a href="#自动更新" class="headerlink" title="自动更新"></a>自动更新</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker run -d <span class="hljs-string">\</span><br>    --name watchtower <span class="hljs-string">\</span><br>    --restart <span class="hljs-keyword">unless</span>-stopped <span class="hljs-string">\</span><br>    -v /<span class="hljs-keyword">var</span>/run/docker.sock:/<span class="hljs-keyword">var</span>/run/docker.sock <span class="hljs-string">\</span><br>    containrrr/watchtower -c <span class="hljs-string">\</span><br>    --interval <span class="hljs-number">3600</span> <span class="hljs-string">\</span><br>    efb gocq<br></code></pre></td></tr></table></figure><h2 id="本地代理"><a href="#本地代理" class="headerlink" title="本地代理"></a>本地代理</h2><p>如果你的服务器环境可以连接到Telegram服务器，可跳过本章节</p><p>本教程使用 <a href="https://github.com/TyrantLucifer/ssr-command-client">ssr-command-client</a> 作为本地代理，可参考此项目文档配置</p><ol><li><p>安装</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 install shadowsocksr-cli<br></code></pre></td></tr></table></figure></li><li><p>使用</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">    <span class="hljs-comment"># 添加订阅链接</span><br>    shadowsocksr-cli --add-url 你的ssr订阅链接<br>    <span class="hljs-comment"># 更新订阅</span><br>    shadowsocksr-cli -u<br>    <span class="hljs-comment"># 启动</span><br>    shadowsocksr-cli --fast-node<br><br>3. 修改`EFB`配置<br><br>    编辑`./TG-EFB-QQ-Docker/efb/profile/default/blueset.telegram/config.yaml`，添加代理<br><br>    ```yaml<br>    token: xxx:xxx<br>    admins:<br>    - xxxxxxxx<br>    <span class="hljs-comment"># 添加下面的两行</span><br>    request_kwargs:<br>        proxy_url: socks5h://127.0.0.1:1080/<br></code></pre></td></tr></table></figure></li><li><p>重启</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose down<br>docker-compose up -d<br></code></pre></td></tr></table></figure></li></ol><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul><li><p>无法发送群消息，只能接收？</p><p>  无法发送大于三个字符的群消息，接收正常；好友消息的收发正常。这种情况是触发了TX的风控，一般服务器上挂12小时-2天即可正常</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Docker</tag>
      
      <tag>Telegram</tag>
      
      <tag>QQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>空调房</title>
    <link href="/2021/air-conditioner-room/"/>
    <url>/2021/air-conditioner-room/</url>
    
    <content type="html"><![CDATA[<blockquote><p>云空调，便携小空调，为你的夏日带去清凉！</p></blockquote><span id="more"></span><hr><iframe style="width:100%;" height="760" frameborder="no" src="https://ac.yunyoujun.cn"></iframe><hr>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>（旧）Telegram收发QQ信息-EFB和Mirai的Docker部署教程</title>
    <link href="/2021/tg-qq-mirai/"/>
    <url>/2021/tg-qq-mirai/</url>
    
    <content type="html"><![CDATA[<p>使用 Bot 在 Telegram 及 QQ 间转发消息，基本可以做到去 QQ 化，仅在 Telegram 上与 QQ 好友&#x2F;群组互动</p><span id="more"></span><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>使用 Bot 在 Telegram 及 QQ 间转发消息，基本可以做到去 QQ 化，仅在 Telegram 上与 QQ 好友&#x2F;群组互动</p><p>本项目使用 Docker Compose 简化了 <a href="https://github.com/ehForwarderBot/ehForwarderBot">Telegram Bot</a> 和 <a href="https://github.com/Mrs4s/go-cqhttp">QQ Bot</a> 的安装与配置，仅需要 Docker Compose 与流畅的国际互联网连接即可使用</p><p>本教程为 Mirai 版本，推荐使用 <a href="/2021/tg-qq-gocq/" title="Telegram收发QQ信息-EFB和GO-CQHTTP的Docker部署教程">go-cqhttp</a> 版</p><h3 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h3><ul><li><a href="https://www.docker.com/">Docker</a></li><li><a href="https://docs.docker.com/compose/">Docker Compose</a></li><li>能稳定连接到Telegram服务器的网络</li></ul><h3 id="使用项目"><a href="#使用项目" class="headerlink" title="使用项目"></a>使用项目</h3><ul><li><p><a href="https://github.com/xzsk2/TG-EFB-QQ-Docker">TG-EFB-QQ-Docker</a></p><ul><li><p><a href="https://github.com/xzsk2/EFB-Docker">EFB-Docker</a></p><ul><li><a href="https://github.com/ehForwarderBot/ehForwarderBot">EH Forwarder Bot</a></li><li><a href="https://github.com/ehForwarderBot/efb-telegram-master">Telegram Master</a></li><li><a href="https://github.com/milkice233/efb-qq-slave">QQ Slave</a></li><li><a href="https://github.com/milkice233/efb-qq-plugin-mirai">QQ Plugin Mirai</a></li></ul></li><li><p><a href="https://github.com/xzsk2/Mirai-Docker">Mirai-Docker</a></p><ul><li><a href="https://github.com/iTXTech/mirai-console-loader">Mirai Console Loader</a></li><li><a href="https://github.com/project-mirai/mirai-api-http">mirai-api-http</a></li></ul></li></ul></li></ul><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="克隆项目"><a href="#克隆项目" class="headerlink" title="克隆项目"></a>克隆项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 克隆</span><br>git <span class="hljs-built_in">clone</span> -b mirai https://github.com/xzsk2/TG-EFB-QQ-Docker.git<br><span class="hljs-comment"># 进入文件夹</span><br><span class="hljs-built_in">cd</span> TG-EFB-QQ-Docker<br></code></pre></td></tr></table></figure><h3 id="配置Mirai端"><a href="#配置Mirai端" class="headerlink" title="配置Mirai端"></a>配置<code>Mirai</code>端</h3><ol><li><p>编辑<code>./mirai/config/net.mamoe.mirai-api-http/setting.yml</code>，修改<code>authKey</code>，最少8位，记下这个<code>authKey</code>，会在下面配置EFB的过程中用到</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">authKey:</span> <span class="hljs-string">xxxxxxxx</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="配置EFB端"><a href="#配置EFB端" class="headerlink" title="配置EFB端"></a>配置<code>EFB</code>端</h3><ol><li><p>获取<code>token</code></p><p> 创建一个Bot，向 <a href="https://t.me/BotFather">@BotFather</a> 发起会话，发送指令 <code>/newbot</code> 开始创建Bot，创建完成后可获取<code>token</code></p></li><li><p>查看自己的<code>Telegram ID</code></p><p> 向 <a href="https://t.me/get_id_bot">@get_id_bot</a> 发送<code>/start</code>，得到的<code>Chat ID</code>即为用户的<code>Telegram ID</code></p></li><li><p>打开<code>./efb/profiles/default/blueset.telegram/config.yaml</code>，修改下列字段，<code>token</code>修改为上面获取到的<code>Bot token</code>，<code>admins</code>修改为<code>Telegram ID</code>，注意格式</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">token:</span> <span class="hljs-number">123456789</span><span class="hljs-string">:ABCDEFG1ABCDEFG1ABCDEFG1</span><br><span class="hljs-attr">admins:</span><br><span class="hljs-bullet">-</span> <span class="hljs-number">987654321</span><br></code></pre></td></tr></table></figure></li><li><p>打开<code>./efb/profiles/default/milkice.qq/config.yaml</code>，修改<code>qq</code>和<code>authKey</code></p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">mirai</span><br><span class="hljs-attr">mirai:</span><br>    <span class="hljs-attr">qq:</span> <span class="hljs-string">xxxxxxxx</span>           <span class="hljs-comment"># 这里换成登录的 QQ 号</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">&quot;mirai&quot;</span>       <span class="hljs-comment"># 这个不要改</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>              <span class="hljs-comment"># 同上</span><br>    <span class="hljs-attr">authKey:</span> <span class="hljs-string">&quot;xxxxxxxx&quot;</span> <span class="hljs-comment"># 这里填入在配置 Mirai API HTTP 时生成的 authKey</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><ol><li><p>登录QQ，在<code>docker-compose.yml</code>文件夹下运行</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it --name=<span class="hljs-string">&quot;mirai&quot;</span> -p 8080:8080 -v <span class="hljs-variable">$PWD</span>/mirai/config:/app/config -v <span class="hljs-variable">$PWD</span>/mirai/bots:/app/bots xzsk2/mirai-docker:latest<br></code></pre></td></tr></table></figure></li><li><p>使用<code>/login</code>登录账号</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/login &lt;qq&gt; &lt;password&gt;    <span class="hljs-comment"># 登录一个账号</span><br></code></pre></td></tr></table></figure></li><li><p>出现<code>Login successful</code>后登录成功，再次运行</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run --<span class="hljs-built_in">rm</span> -it --name=<span class="hljs-string">&quot;mirai&quot;</span> -p 8080:8080 -v <span class="hljs-variable">$PWD</span>/mirai/config:/app/config -v <span class="hljs-variable">$PWD</span>/mirai/bots:/app/bots xzsk2/mirai-docker:latest<br></code></pre></td></tr></table></figure></li><li><p>使用<code>/autologin</code>设置自动登录</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/autoLogin add &lt;account&gt; &lt;password&gt; <span class="hljs-comment"># 添加自动登录</span><br></code></pre></td></tr></table></figure></li><li><p>之后使用<code>CTRL+C</code>退出容器，使用<code>docker-compose</code>启动</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose up -d<br></code></pre></td></tr></table></figure></li></ol><h2 id="本地代理"><a href="#本地代理" class="headerlink" title="本地代理"></a>本地代理</h2><p>如果你的服务器环境可以连接到Telegram服务器，可跳过本章节</p><p>本教程使用 <a href="https://github.com/TyrantLucifer/ssr-command-client">ssr-command-client</a> 作为本地代理，可参考此项目文档配置</p><ol><li><p>安装</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 install shadowsocksr-cli<br></code></pre></td></tr></table></figure></li><li><p>使用</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">   <span class="hljs-comment"># 添加订阅链接</span><br>   shadowsocksr-cli --add-url 你的ssr订阅链接<br>   <span class="hljs-comment"># 更新订阅</span><br>   shadowsocksr-cli -u<br>   <span class="hljs-comment"># 启动</span><br>   shadowsocksr-cli --fast-node<br><span class="hljs-comment"># 修改监听地址</span><br>shadowsocksr-cli --setting-address 0.0.0.0<br></code></pre></td></tr></table></figure></li><li><p>修改<code>EFB</code>配置</p><p> 编辑<code>./TG-EFB-QQ-Docker/efb/profile/default/blueset.telegram/config.yaml</code>，添加代理</p> <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">token:</span> <span class="hljs-string">xxx:xxx</span><br><span class="hljs-attr">admins:</span><br><span class="hljs-bullet">-</span> <span class="hljs-string">xxxxxxxx</span><br><span class="hljs-comment"># 添加下面的两行</span><br><span class="hljs-attr">request_kwargs:</span><br>    <span class="hljs-attr">proxy_url:</span> <span class="hljs-string">socks5h://172.17.0.1:1080/</span><br></code></pre></td></tr></table></figure></li><li><p>重启</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose down<br>docker-compose up -d<br></code></pre></td></tr></table></figure></li></ol><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul><li><p>Mirai登陆失败&#x2F;验证码&#x2F;版本过低？</p><p>  请尝试先在本地桌面环境下部署Mirai，如需要滑动验证码请使用 <a href="https://github.com/project-mirai/mirai-login-solver-selenium">mirai-login-solver-selenium</a>，或修改登录协议</p></li><li><p>无法发送群消息，只能接收？</p><p>  无法发送大于三个字符的群消息，接收正常；好友消息的收发正常。这种情况是触发了TX的风控，一般服务器上挂12小时-2天即可正常</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Docker</tag>
      
      <tag>Telegram</tag>
      
      <tag>QQ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Chrome+SwitchyOmega+Clash的处理</title>
    <link href="/2021/chrome-clash/"/>
    <url>/2021/chrome-clash/</url>
    
    <content type="html"><![CDATA[<h2 id="症状"><a href="#症状" class="headerlink" title="症状"></a>症状</h2><p>在使用Chrome+SwitchyOmega+Clash的环境下，SwitchyOmega的“代理”操作会将代理请求发送至Clash，由Clash判断是否使用代理。这样就造成了用户想要某个域名走代理，但是Clash规则中默认该域名直连，最终还是直连的情况。</p><span id="more"></span><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="Clash配置"><a href="#Clash配置" class="headerlink" title="Clash配置"></a>Clash配置</h3><p>配置Clash将来自Chrome的流量全部使用代理</p><p>进入Clash的Settings页面，选择Profiles下的Parsers，编辑配置文件预处理，参考 <a href="https://docs.cfw.lbyczf.com/contents/parser.html">配置文件预处理</a></p><p>其中<code>URL</code>修改为配置文件的URL，<code>节点选择</code>修改为配置文件内的<code>proxy-groups</code>下的<code>name</code>，根据情况选择</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">parsers:</span> <span class="hljs-comment"># array</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">URL</span><br>    <span class="hljs-attr">yaml:</span><br>      <span class="hljs-attr">prepend-rules:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">PROCESS-NAME,chrome.exe,节点选择</span><br></code></pre></td></tr></table></figure><h3 id="SwitchyOmega配置"><a href="#SwitchyOmega配置" class="headerlink" title="SwitchyOmega配置"></a>SwitchyOmega配置</h3><p>设置自动切换规则，可以参考 <a href="https://proxy-switchyomega.com/settings/">Proxy SwitchyOmega</a> 配置</p><p>注意在SwitchyOmega内设置为直连的域名将不经过Clash直接访问，设置为代理的域名将无视Clash规则直接代理</p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Clash</tag>
      
      <tag>Chrome</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows10 右键 ts 文件卡死</title>
    <link href="/2021/windows-ts/"/>
    <url>/2021/windows-ts/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ts文件卡死是怎么回事呢？ts文件相信大家都很熟悉，但是卡死是怎么回事呢？下面就让小编带大家一起了解吧。<br>ts文件卡死，其实就是卡死了。那么ts文件为什么会卡死，相信大家都很好奇是怎么回事。大家可能会感到很惊讶，ts文件怎么会卡死呢？但事实就是这样，小编也感到非常惊讶。那么这就是关于ts文件卡死的事情了，大家有没有觉得很神奇呢？<br>看了今天的内容，大家有什么想法呢？欢迎在评论区告诉小编一起讨论哦。</p></blockquote><span id="more"></span><h2 id="症状"><a href="#症状" class="headerlink" title="症状"></a>症状</h2><p>右键大小较大的.ts文件经常会出现资源管理器卡死或长时间未响应的情况</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><h3 id="暴力方案"><a href="#暴力方案" class="headerlink" title="暴力方案"></a>暴力方案</h3><p>直接删除<code>mfmpeg2srcsnk.dll</code></p><h3 id="正常方案"><a href="#正常方案" class="headerlink" title="正常方案"></a>正常方案</h3><p>下载并打开 <a href="http://www.nirsoft.net/utils/shexview.html">shexview</a> ，找到<code>MF MPEG Property Handler</code>，右键Disable即可</p><p><img src="/img/posts/ts-1.png"></p><h2 id="Icaros"><a href="#Icaros" class="headerlink" title="Icaros"></a>Icaros</h2><p>使资源管理器支持所有媒体格式的缩略图以及详细信息的软件</p><p><a href="https://www.majorgeeks.com/files/details/icaros.html">下载链接</a></p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="/img/posts/ts-2.png"></div><div class="group-image-wrap"><img src="/img/posts/ts-3.png"></div></div></div><center>👈启用前&emsp;&emsp;&emsp;&emsp;启用后👉</center>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Media</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows下为PowerShell/CMD/Git设置代理</title>
    <link href="/2021/windows-proxy/"/>
    <url>/2021/windows-proxy/</url>
    
    <content type="html"><![CDATA[<h2 id="PowerShell"><a href="#PowerShell" class="headerlink" title="PowerShell"></a>PowerShell</h2><h3 id="1-在-PowerShell-窗口中运行如下指令"><a href="#1-在-PowerShell-窗口中运行如下指令" class="headerlink" title="1. 在 PowerShell 窗口中运行如下指令"></a>1. 在 <code>PowerShell</code> 窗口中运行如下指令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> (!(Test-Path -Path <span class="hljs-variable">$PROFILE</span> )) &#123; New-Item -Type File -Path <span class="hljs-variable">$PROFILE</span> -Force &#125;<br>notepad <span class="hljs-variable">$PROFILE</span><br></code></pre></td></tr></table></figure><h3 id="2-在打开的记事本中添加如下代码"><a href="#2-在打开的记事本中添加如下代码" class="headerlink" title="2. 在打开的记事本中添加如下代码"></a>2. 在打开的记事本中添加如下代码</h3><p>注意修改第九行代理地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Set-Proxy command</span><br><span class="hljs-keyword">if</span> (<span class="hljs-variable">$env</span>:HTTP_PROXY -ne <span class="hljs-variable">$null</span>)&#123;<br>    Write-Output <span class="hljs-string">&quot;Proxy Enabled as <span class="hljs-variable">$env</span>:HTTP_PROXY&quot;</span>;<br>&#125;<br><br>Function <span class="hljs-function"><span class="hljs-title">SetProxy</span></span>() &#123;<br>    Param(<br>        <span class="hljs-comment"># 改成自己的代理地址</span><br>        <span class="hljs-variable">$Addr</span> = <span class="hljs-string">&#x27;http://127.0.0.1:19810&#x27;</span>,<br>        [switch]<span class="hljs-variable">$ApplyToSystem</span><br>    )<br><br>    <span class="hljs-variable">$env</span>:HTTP_PROXY = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:HTTPS_PROXY = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:http_proxy = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:https_proxy = <span class="hljs-variable">$Addr</span>;<br><br>    [Net.WebRequest]::DefaultWebProxy = New-Object Net.WebProxy <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$ApplyToSystem</span>) &#123;<br>        <span class="hljs-variable">$matchedResult</span> = ValidHttpProxyFormat <span class="hljs-variable">$Addr</span>;<br>        <span class="hljs-comment"># Matched result: [URL Without Protocol][Input String]</span><br>        <span class="hljs-keyword">if</span> (-not (<span class="hljs-variable">$matchedResult</span> -eq <span class="hljs-variable">$null</span>)) &#123;<br>            SetSystemProxy <span class="hljs-variable">$matchedResult</span>.1;<br>        &#125;<br>    &#125;<br>    Write-Output <span class="hljs-string">&quot;Successful set proxy as <span class="hljs-variable">$Addr</span>&quot;</span>;<br>&#125;<br>Function <span class="hljs-function"><span class="hljs-title">ClearProxy</span></span>() &#123;<br>    Param(<br>        <span class="hljs-variable">$Addr</span> = <span class="hljs-variable">$null</span>,<br>        [switch]<span class="hljs-variable">$ApplyToSystem</span><br>    )<br><br>    <span class="hljs-variable">$env</span>:HTTP_PROXY = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:HTTPS_PROXY = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:http_proxy = <span class="hljs-variable">$Addr</span>;<br>    <span class="hljs-variable">$env</span>:https_proxy = <span class="hljs-variable">$Addr</span>;<br><br>    [Net.WebRequest]::DefaultWebProxy = New-Object Net.WebProxy;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$ApplyToSystem</span>) &#123; SetSystemProxy <span class="hljs-variable">$null</span>; &#125;<br>    Write-Output <span class="hljs-string">&quot;Successful unset all proxy variable&quot;</span>;<br><br>&#125;<br>Function SetSystemProxy(<span class="hljs-variable">$Addr</span> = <span class="hljs-variable">$null</span>) &#123;<br>    Write-Output <span class="hljs-variable">$Addr</span><br>    <span class="hljs-variable">$proxyReg</span> = <span class="hljs-string">&quot;HKCU:\Software\Microsoft\Windows\CurrentVersion\Internet Settings&quot;</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$Addr</span> -eq <span class="hljs-variable">$null</span>) &#123;<br>        Set-ItemProperty -Path <span class="hljs-variable">$proxyReg</span> -Name ProxyEnable -Value 0;<br>        <span class="hljs-built_in">return</span>;<br>    &#125;<br>    Set-ItemProperty -Path <span class="hljs-variable">$proxyReg</span> -Name ProxyServer -Value <span class="hljs-variable">$Addr</span>;<br>    Set-ItemProperty -Path <span class="hljs-variable">$proxyReg</span> -Name ProxyEnable -Value 1;<br>&#125;<br>Function ValidHttpProxyFormat (<span class="hljs-variable">$Addr</span>) &#123;<br>    <span class="hljs-variable">$regex</span> = <span class="hljs-string">&quot;(?:https?:\/\/)(\w+(?:.\w+)*(?::\d+)?)&quot;</span>;<br>    <span class="hljs-variable">$result</span> = <span class="hljs-variable">$Addr</span> -match <span class="hljs-variable">$regex</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$result</span> -eq <span class="hljs-variable">$false</span>) &#123;<br>        throw [System.ArgumentException]<span class="hljs-string">&quot;The input <span class="hljs-variable">$Addr</span> is not a valid HTTP proxy URI.&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">return</span> <span class="hljs-variable">$Matches</span>;<br>&#125;<br>Set-Alias set-proxy SetProxy<br>Set-Alias clear-proxy ClearProxy<br></code></pre></td></tr></table></figure><h3 id="3-保存，重新打开PowerShell"><a href="#3-保存，重新打开PowerShell" class="headerlink" title="3. 保存，重新打开PowerShell"></a>3. 保存，重新打开PowerShell</h3><p>设置当前窗口代理 ：<code>set-proxy</code></p><p>设置当前窗口代理 + 系统代理：<code>set-proxy -ApplyToSystem</code></p><p>取消当前窗口代理：<code>clear-proxy</code></p><p>取消当前窗口代理 + 系统代理：<code>clear-proxy -ApplyToSystem</code></p><p><code>set-proxy</code>和<code>SetProxy</code>，<code>clear-proxy</code>和<code>ClearProxy</code>可以互相替换</p><h2 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h2><p>设置代理，窗口关闭后失效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> http_proxy=http://127.0.0.1:19810<br><span class="hljs-built_in">set</span> https_proxy=http://127.0.0.1:19810<br></code></pre></td></tr></table></figure><h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>设置Http代理，永久生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global https.proxy https://127.0.0.1:19810<br>git config --global http.proxy http://127.0.0.1:19810<br></code></pre></td></tr></table></figure><p>取消代理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global --<span class="hljs-built_in">unset</span> http.proxy<br>git config --global --<span class="hljs-built_in">unset</span> https.proxy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
      <tag>Proxy</tag>
      
      <tag>PowerShell</tag>
      
      <tag>CMD</tag>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>如何让pptp连接/断开后自动添加路由</title>
    <link href="/2018/pptp-route/"/>
    <url>/2018/pptp-route/</url>
    
    <content type="html"><![CDATA[<p>测试平台：Openwrt</p><p>在<code>/etc/hotplug.d/iface/</code>下添加<code>30-routes</code>文件,系统将在接口状态发生生变化时执行该脚本。</p><span id="more"></span><p>然后在<code>30-routes</code>中写入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/sh</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$ACTION</span>&quot;</span> = <span class="hljs-string">&quot;ifdown&quot;</span> -a <span class="hljs-string">&quot;<span class="hljs-variable">$INTERFACE</span>&quot;</span> = <span class="hljs-string">&quot;pptp-vpn0&quot;</span> ]<br><span class="hljs-keyword">then</span><br><br><span class="hljs-comment">#在此添加断开后的代码</span><br><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$ACTION</span>&quot;</span> = <span class="hljs-string">&quot;ifup&quot;</span> -a <span class="hljs-string">&quot;<span class="hljs-variable">$INTERFACE</span>&quot;</span> = <span class="hljs-string">&quot;pptp-vpn0&quot;</span> ]<br><span class="hljs-keyword">then</span><br><br><span class="hljs-comment">#在此添加连接后需要执行的代码</span><br><br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>把<code>pptp-vpn0</code>修改为自己想要的接口名。</p><p>比如我现在需要在<code>pptp-vpn0</code>断开后自动添加192.168.0.1为默认路由，则设置如下</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$ACTION</span>&quot;</span> = <span class="hljs-string">&quot;ifdown&quot;</span> -a <span class="hljs-string">&quot;<span class="hljs-variable">$INTERFACE</span>&quot;</span> = <span class="hljs-string">&quot;virtual**&quot;</span> ]<br>then<br><span class="hljs-built_in"></span><br><span class="hljs-built_in">route </span><span class="hljs-built_in">add</span><span class="hljs-built_in"> default </span>gw 192.168.0.1<br><br>fi<br></code></pre></td></tr></table></figure><p>加入了一行<code>route add default gw 192.168.0.1</code></p>]]></content>
    
    
    <categories>
      
      <category>Router</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Image Recognition</title>
    <link href="/2018/zznuoj%202113/"/>
    <url>/2018/zznuoj%202113/</url>
    
    <content type="html"><![CDATA[<p><a href="http://acm.hi-54.com/problem.php?pid=2113">第十一届河南省ACM程序设计竞赛 I题</a></p><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdafx.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> source[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<span class="hljs-comment">//原始矩阵</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> sourcesum;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> newm[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<span class="hljs-comment">//新矩阵</span><br><span class="hljs-type">int</span> m, n;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> a[<span class="hljs-number">101</span>], b[<span class="hljs-number">101</span>];<span class="hljs-comment">//a为每行的最大数，b为每列最大数</span><br><span class="hljs-type">bool</span> av[<span class="hljs-number">101</span>], bv[<span class="hljs-number">101</span>];<span class="hljs-comment">//visited</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> minsum;<br><br><span class="hljs-comment">//时间判断变量定义</span><br><span class="hljs-type">long</span> <span class="hljs-type">long</span> totaltime = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> requiretime = <span class="hljs-number">0</span>;<br><br><span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">zeroSave</span> &#123;<br><span class="hljs-type">int</span> x;<br><span class="hljs-type">int</span> y;<br>&#125;;<br><br>vector&lt;zeroSave&gt; zs;<br><br><span class="hljs-comment">//初始化</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">memset</span>(source, <span class="hljs-number">-1</span>, <span class="hljs-built_in">sizeof</span>(source));<br><span class="hljs-built_in">memset</span>(newm, <span class="hljs-number">-1</span>, <span class="hljs-built_in">sizeof</span>(newm));<br><span class="hljs-built_in">memset</span>(a, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(a));<br><span class="hljs-built_in">memset</span>(b, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(b));<br><span class="hljs-built_in">memset</span>(av, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(av));<br><span class="hljs-built_in">memset</span>(bv, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(bv));<br>minsum = <span class="hljs-number">0</span>;<br>sourcesum = <span class="hljs-number">0</span>;<br>zs.<span class="hljs-built_in">clear</span>();<br>zs.<span class="hljs-built_in">push_back</span>(&#123; <span class="hljs-number">0</span> &#125;);<br>&#125;<br><br><span class="hljs-comment">//矩阵输入</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">input</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin &gt;&gt; totaltime &gt;&gt; requiretime;<br>cin &gt;&gt; m &gt;&gt; n;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>&#123;<br><span class="hljs-type">int</span> tmp = <span class="hljs-number">0</span>;<br>cin &gt;&gt; tmp;<br>source[i][j] = tmp;<br>sourcesum += tmp;<br><span class="hljs-keyword">if</span> (!tmp)<br>&#123;<br>newm[i][j] = <span class="hljs-number">0</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//每行每列最大值计算</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">maxcal</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> max;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>&#123;<br>max = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (max &lt; source[i][j])<br>max = source[i][j];<br>&#125;<br>a[i] = max;<br>&#125;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>&#123;<br>max = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (max &lt; source[i][j])<br>max = source[i][j];<br>&#125;<br>b[j] = max;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//矩阵构造</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">construct</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-comment">//从主视图和左视图看，最优矩阵生成</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br><span class="hljs-keyword">if</span> (a[i] == b[j] &amp;&amp; bv[j] == <span class="hljs-number">0</span>)<br>&#123;<br>av[i] = <span class="hljs-number">1</span>;<br>bv[j] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">if</span> (source[i][j] != <span class="hljs-number">0</span>)<br>&#123;<br>newm[i][j] = a[i];<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<span class="hljs-comment">//碰到合并到0的情况先保存，后面处理</span><br>zeroSave temp;<br>temp.x = i; temp.y = j;<br>zs.<span class="hljs-built_in">push_back</span>(temp);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//剩余最大值插入</span><br><span class="hljs-comment">//行剩余处理</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (av[i] == <span class="hljs-number">1</span>)<br><span class="hljs-keyword">continue</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (a[i] &lt;= b[j] &amp;&amp; source[i][j] != <span class="hljs-number">0</span>)<br>&#123;<br>newm[i][j] = a[i];<br>av[i] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-comment">//列剩余处理</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (bv[j] == <span class="hljs-number">1</span>)<br><span class="hljs-keyword">continue</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (b[j] &lt;= a[i] &amp;&amp; source[i][j] != <span class="hljs-number">0</span>)<br>&#123;<br>newm[i][j] = b[j];<br>bv[j] = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//对最大值合并到0上时的处理</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">zero</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">unsigned</span> k = <span class="hljs-number">1</span>; k &lt; zs.<span class="hljs-built_in">size</span>(); k++)<br>&#123;<br><span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br><span class="hljs-comment">//查询当前0的横方向上是否有跟最大值相等的数</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>&#123;<br><span class="hljs-keyword">if</span> (a[zs[k].x] == b[i] &amp;&amp; i != zs[k].y)<span class="hljs-comment">//如果存在</span><br>&#123;<br>flag = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-keyword">if</span> (flag == <span class="hljs-number">0</span>)<span class="hljs-comment">//如果不存在</span><br>&#123;<br><span class="hljs-comment">//横向分散</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br><span class="hljs-keyword">if</span> (newm[zs[k].x][i] == <span class="hljs-number">-1</span>)<br>&#123;<br>newm[zs[k].x][i] = a[zs[k].x];<br><span class="hljs-keyword">break</span>;<br>&#125;<br><span class="hljs-comment">//纵向分散</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br><span class="hljs-keyword">if</span> (newm[i][zs[k].y] == <span class="hljs-number">-1</span>)<br>&#123;<br>newm[i][zs[k].y] = b[zs[k].y];<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//计算新矩阵大小</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">newMatrixSum</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>minsum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br><span class="hljs-keyword">if</span> (newm[i][j] != <span class="hljs-number">-1</span>)<br>minsum += newm[i][j];<br><span class="hljs-keyword">else</span><br>&#123;<br>minsum++;<br>newm[i][j] = <span class="hljs-number">1</span>;<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//oj输出</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">oj</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>cin &gt;&gt; T;<br><span class="hljs-type">long</span> <span class="hljs-type">long</span> diff;<br><span class="hljs-keyword">while</span> (T--)<br>&#123;<br><span class="hljs-built_in">init</span>();<br><span class="hljs-built_in">input</span>();<br><span class="hljs-built_in">maxcal</span>();<br><span class="hljs-built_in">construct</span>();<br><span class="hljs-built_in">zero</span>();<br><span class="hljs-built_in">newMatrixSum</span>();<br><br>diff = sourcesum - minsum;<br><span class="hljs-keyword">if</span> (totaltime / (<span class="hljs-type">double</span>)requiretime &gt; diff)<br>&#123;<br>cout &lt;&lt; diff &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; totaltime / requiretime &lt;&lt; endl;<br>&#125;<br>&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">oj</span>();<br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>OJ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>poj1328 雷达安装</title>
    <link href="/2018/1328/"/>
    <url>/2018/1328/</url>
    
    <content type="html"><![CDATA[<p>雷达安装</p><p><a href="http://poj.org/problem?id=1328">poj1328</a></p><p>以岛屿为圆心，雷达范围为半径，计算此圆与x轴交点的线段，以此把所有岛屿的区间计算出来。</p><p>因此，这道题就变成了在数轴上选最少的点，覆盖给定线段。</p><p>把每条线段以右端点排序，然后进行选择即可。</p><p>sqrt函数使用时要保证数据类型一致。</p><p>注意输出格式以及Case的C要大写&#x3D; &#x3D;</p><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdafx.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">radarRange</span> &#123;<br><span class="hljs-type">double</span> left;<br><span class="hljs-type">double</span> right;<br><span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (<span class="hljs-type">const</span> radarRange &amp;x) <span class="hljs-type">const</span> <span class="hljs-comment">//&lt;重载，用于sort函数</span><br>&#123;<br><span class="hljs-keyword">if</span> (right != x.right) <span class="hljs-keyword">return</span> right &lt; x.right;<br><span class="hljs-keyword">return</span> left &lt; x.left;<br>&#125;<br>&#125;;<br><br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">islandPosition</span> &#123;<br><span class="hljs-type">int</span> x;<br><span class="hljs-type">int</span> y;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">radar</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> n, d;<br>cin &gt;&gt; n &gt;&gt; d;<br><span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span> &amp;&amp; d == <span class="hljs-number">0</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-number">-2</span>;<br><br>islandPosition *p = <span class="hljs-keyword">new</span> islandPosition[n];<br>radarRange *r = <span class="hljs-keyword">new</span> radarRange[n];<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>&#123;<br>cin &gt;&gt; p[i].x &gt;&gt; p[i].y;<br>&#125;<br><br><span class="hljs-keyword">if</span> (d == <span class="hljs-number">0</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br><span class="hljs-keyword">if</span> (p[i].y &gt; d)<br>&#123;<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<span class="hljs-comment">//计算雷达安装范围</span><br>&#123;<br><span class="hljs-type">double</span> tmp = <span class="hljs-built_in">sqrt</span>(<span class="hljs-built_in">double</span>(d *d) - <span class="hljs-built_in">double</span>(p[i].y * p[i].y));<br>r[i].left = p[i].x - tmp;<br>r[i].right = p[i].x + tmp;<br>&#125;<br><br><span class="hljs-comment">//for (int i = 0; i &lt; n; i++)//debug</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; r[i].left &lt;&lt; &#x27; &#x27; &lt;&lt; r[i].right &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-built_in">sort</span>(r, r + n);<br><span class="hljs-comment">//for (int i = 0; i &lt; n; i++)//debug</span><br><span class="hljs-comment">//&#123;</span><br><span class="hljs-comment">//cout &lt;&lt; r[i].left &lt;&lt; &#x27; &#x27; &lt;&lt; r[i].right &lt;&lt; endl;</span><br><span class="hljs-comment">//&#125;</span><br><span class="hljs-type">double</span> start, end;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">1</span>;<br>start = r[<span class="hljs-number">0</span>].left;<br>end = r[<span class="hljs-number">0</span>].right;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; n; i++)<span class="hljs-comment">//计算所需雷达数</span><br>&#123;<br><span class="hljs-keyword">if</span> (r[i].left &lt;= end &amp;&amp; r[i].left &gt;= start)<br>&#123;<br>start = r[i].left;<br>&#125;<br><span class="hljs-comment">/*if (r[i].left &lt;= end &amp;&amp; r[i].left &lt; start)</span><br><span class="hljs-comment">&#123;</span><br><span class="hljs-comment">;</span><br><span class="hljs-comment">&#125;*/</span><br><span class="hljs-keyword">if</span> (r[i].left &gt; end)<br>&#123;<br>start = r[i].left;<br>end = r[i].right;<br>sum++;<br>&#125;<br>&#125;<br><span class="hljs-keyword">delete</span>[] p; <span class="hljs-keyword">delete</span>[] r;<br><span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> tmp;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>&#123;<br>tmp = <span class="hljs-built_in">radar</span>();<br><span class="hljs-keyword">if</span> (tmp == <span class="hljs-number">-2</span>) <span class="hljs-keyword">break</span>;<br>cout &lt;&lt; <span class="hljs-string">&quot;Case &quot;</span> &lt;&lt; sum++ &lt;&lt; <span class="hljs-string">&quot;: &quot;</span> &lt;&lt; tmp &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">Sample Input</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">3 2</span><br><span class="hljs-comment">1 2</span><br><span class="hljs-comment">-3 1</span><br><span class="hljs-comment">2 1</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">1 2</span><br><span class="hljs-comment">0 2</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">0 0</span><br><span class="hljs-comment">Sample Output</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">Case 1: 2</span><br><span class="hljs-comment">Case 2: 1</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>OJ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>poj1458 最长公共子序列长度</title>
    <link href="/2018/1458/"/>
    <url>/2018/1458/</url>
    
    <content type="html"><![CDATA[<p>最长公共子序列长度</p><p><a href="http://poj.org/problem?id=1458">poj.org 1458</a></p><span id="more"></span><p>状态转移方程：<br><img src="data:image/jpeg;base64,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" alt="状态转移方程"></p><p>最长公共子序列长度C++代码实现：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">LCS</span><span class="hljs-params">(string a, string b)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> la, lb;<br>la = a.<span class="hljs-built_in">length</span>();<br>lb = b.<span class="hljs-built_in">length</span>();<br>vector&lt;vector&lt;<span class="hljs-type">int</span>&gt;&gt; <span class="hljs-built_in">c</span>(la + <span class="hljs-number">1</span>, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-type">int</span>&gt;(lb + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>));<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= la; i++)<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= lb; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (a[i - <span class="hljs-number">1</span>] == b[j - <span class="hljs-number">1</span>])<br>c[i][j] = c[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br><span class="hljs-keyword">else</span><br>c[i][j] = <span class="hljs-built_in">max</span>(c[i - <span class="hljs-number">1</span>][j], c[i][j - <span class="hljs-number">1</span>]);<br>&#125;<br><br><span class="hljs-keyword">return</span> c[la][lb];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>string a, b;<br><span class="hljs-keyword">while</span> (cin &gt;&gt; a &gt;&gt; b)<br>&#123;<br>cout &lt;&lt; <span class="hljs-built_in">LCS</span>(a, b) &lt;&lt; endl;<br>&#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>OJ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>poj2485 Prim算法</title>
    <link href="/2018/2485/"/>
    <url>/2018/2485/</url>
    
    <content type="html"><![CDATA[<p>Prim算法</p><p><a href="http://poj.org/problem?id=2485">poj.org 2485</a>.</p><span id="more"></span><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;stdafx.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 1000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXCOST 0x3f3f3f3f</span><br><br><span class="hljs-type">int</span> graph[MAX][MAX];<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">prim</span><span class="hljs-params">(<span class="hljs-type">int</span> graph[][MAX], <span class="hljs-type">int</span> n)</span> <span class="hljs-comment">//n顶点个数</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> lowcost[MAX]; <span class="hljs-comment">//lowcost[i]:以i为终点的边的最小权值,lowcost[i]=0表示i点加入了MST</span><br><span class="hljs-type">int</span> mst[MAX]; <span class="hljs-comment">//mst[i]:对应lowcost[i]的起点,mst[i]=0表示起点i加入MST</span><br><span class="hljs-type">int</span> i, j, min, minid;<br><span class="hljs-type">int</span> max = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>&#123;<br>lowcost[i] = graph[<span class="hljs-number">1</span>][i]; <span class="hljs-comment">//从1开始到所有点的权值</span><br>mst[i] = <span class="hljs-number">1</span>; <span class="hljs-comment">//对应lowcost[i]的起点为1</span><br>&#125;<br>mst[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>; <span class="hljs-comment">//1点在MST中</span><br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>&#123;<br>min = MAXCOST; <span class="hljs-comment">//min为最小权值</span><br>minid = <span class="hljs-number">0</span>; <span class="hljs-comment">//最小权值对应的点</span><br><span class="hljs-keyword">for</span> (j = <span class="hljs-number">2</span>; j &lt;= n; j++)<br>&#123;<br><span class="hljs-keyword">if</span> (lowcost[j] &lt; min &amp;&amp; lowcost[j] != <span class="hljs-number">0</span>)<br>&#123;<br>min = lowcost[j];<br>minid = j;<br>&#125;<br>&#125;<br><span class="hljs-comment">//输出示例V1-V3=1</span><br><span class="hljs-keyword">if</span> (min &gt; max)<br>max = min; <span class="hljs-comment">//最小权值累加</span><br>lowcost[minid] = <span class="hljs-number">0</span>; <span class="hljs-comment">//加入MST</span><br><span class="hljs-keyword">for</span> (j = <span class="hljs-number">2</span>; j &lt;= n; j++) <span class="hljs-comment">//更新lowcost[]和mst[]</span><br>&#123;<br><span class="hljs-keyword">if</span> (graph[minid][j] &lt; lowcost[j] &amp;&amp; lowcost[j] != <span class="hljs-number">0</span>)<br>&#123;<br>lowcost[j] = graph[minid][j];<br>mst[j] = minid;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> max;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">int</span> T;<br><span class="hljs-type">int</span> s;<br><span class="hljs-type">int</span> sum;<br><span class="hljs-built_in">memset</span>(graph, MAXCOST, <span class="hljs-built_in">sizeof</span>(graph));<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;T);<br><span class="hljs-keyword">while</span> (T--)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;s);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; s + <span class="hljs-number">1</span>; i++)<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; s + <span class="hljs-number">1</span>; j++)<br>&#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;graph[i][j]);<br><span class="hljs-keyword">if</span> (!graph[i][j])<br>graph[i][j] = MAXCOST;<br>&#125;<br>sum = <span class="hljs-built_in">prim</span>(graph, s);<br>cout &lt;&lt; sum &lt;&lt; endl;<br>&#125;<br><br><span class="hljs-built_in">system</span>(<span class="hljs-string">&quot;pause&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>OJ</category>
      
    </categories>
    
    
  </entry>
  
  
  
  
</search>
